/**
 * Brand icon SVG paths for integration icons.
 * Uses simple-icons where available, hand-crafted minimal SVGs for the rest.
 * Each icon renders at the given size with its official brand color.
 */
import React from 'react';

// Simple-icons paths (24x24 viewBox)
let siCache: Record<string, {path: string; hex: string}> = {};
try {
  const si = require('simple-icons');
  const map: Record<string, string> = {
    GitHub: 'siGithub', Figma: 'siFigma', Linear: 'siLinear',
    Sentry: 'siSentry', Jira: 'siJira', Discord: 'siDiscord',
    Vercel: 'siVercel', Netlify: 'siNetlify', Shopify: 'siShopify',
    Stripe: 'siStripe', Intercom: 'siIntercom', Notion: 'siNotion',
    Gmail: 'siGmail', Telegram: 'siTelegram', Zoom: 'siZoom',
    Loom: 'siLoom', Miro: 'siMiro', Trello: 'siTrello',
    Asana: 'siAsana', Zapier: 'siZapier', Airtable: 'siAirtable',
    Zendesk: 'siZendesk', Dropbox: 'siDropbox', X: 'siX',
    Webflow: 'siWebflow', ClickUp: 'siClickup',
    'Google Drive': 'siGoogledrive', HubSpot: 'siHubspot',
  };
  for (const [name, key] of Object.entries(map)) {
    if (si[key]) {
      siCache[name] = {path: si[key].path, hex: si[key].hex};
    }
  }
} catch {}

// Hand-crafted SVG paths for brands not in simple-icons (24x24 viewBox)
const MANUAL_ICONS: Record<string, {path: string; hex: string}> = {
  Slack: {
    hex: '4A154B',
    path: 'M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zm1.271 0a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zm0 1.271a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zm6.324 5.022a2.528 2.528 0 0 1 2.52-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.52V8.834v2.521-2.521zm-1.271 0a2.528 2.528 0 0 1-2.521 2.521 2.528 2.528 0 0 1-2.521-2.521V2.522A2.528 2.528 0 0 1 11.366 0a2.528 2.528 0 0 1 2.521 2.522v6.312zm-2.521 6.324a2.528 2.528 0 0 1 2.521 2.52A2.528 2.528 0 0 1 15.166 24a2.528 2.528 0 0 1-2.521-2.522v-2.52h2.521zm0-1.271a2.528 2.528 0 0 1-2.521-2.521 2.528 2.528 0 0 1 2.521-2.521h6.312A2.528 2.528 0 0 1 24 15.166a2.528 2.528 0 0 1-2.522 2.521h-6.312z',
  },
  LinkedIn: {
    hex: '0A66C2',
    path: 'M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z',
  },
  ChatGPT: {
    hex: '10A37F',
    path: 'M22.282 9.821a5.985 5.985 0 0 0-.516-4.91 6.046 6.046 0 0 0-6.51-2.9A6.065 6.065 0 0 0 4.981 4.18a5.985 5.985 0 0 0-3.998 2.9 6.046 6.046 0 0 0 .743 7.097 5.98 5.98 0 0 0 .51 4.911 6.051 6.051 0 0 0 6.515 2.9A5.985 5.985 0 0 0 13.26 24a6.056 6.056 0 0 0 5.772-4.206 5.99 5.99 0 0 0 3.997-2.9 6.056 6.056 0 0 0-.747-7.073zM13.26 22.43a4.476 4.476 0 0 1-2.876-1.04l.141-.081 4.779-2.758a.795.795 0 0 0 .392-.681v-6.737l2.02 1.168a.071.071 0 0 1 .038.052v5.583a4.504 4.504 0 0 1-4.494 4.494zM3.6 18.304a4.47 4.47 0 0 1-.535-3.014l.142.085 4.783 2.759a.771.771 0 0 0 .78 0l5.843-3.369v2.332a.08.08 0 0 1-.033.062L9.74 19.95a4.5 4.5 0 0 1-6.14-1.646zM2.34 7.896a4.485 4.485 0 0 1 2.366-1.973V11.6a.766.766 0 0 0 .388.676l5.815 3.355-2.02 1.168a.076.076 0 0 1-.071 0l-4.83-2.786A4.504 4.504 0 0 1 2.34 7.872zm16.597 3.855l-5.833-3.387L15.119 7.2a.076.076 0 0 1 .071 0l4.83 2.791a4.494 4.494 0 0 1-.676 8.105v-5.678a.79.79 0 0 0-.407-.667zm2.01-3.023l-.141-.085-4.774-2.782a.776.776 0 0 0-.785 0L9.409 9.23V6.897a.066.066 0 0 1 .028-.061l4.83-2.787a4.5 4.5 0 0 1 6.68 4.66zm-12.64 4.135l-2.02-1.164a.08.08 0 0 1-.038-.057V6.075a4.5 4.5 0 0 1 7.375-3.453l-.142.08L8.704 5.46a.795.795 0 0 0-.393.681zm1.097-2.365l2.602-1.5 2.607 1.5v2.999l-2.597 1.5-2.607-1.5z',
  },
  Canva: {
    hex: '00C4CC',
    path: 'M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm4.326 16.442c-.456.673-1.137 1.142-1.907 1.345a3.167 3.167 0 0 1-2.318-.248c-.547-.305-.898-.723-1.108-1.168-.159.318-.355.622-.595.9-.719.84-1.737 1.356-2.728 1.356-1.218 0-2.18-.79-2.573-2.014-.364-1.13-.243-2.555.415-3.89.673-1.37 1.697-2.352 2.793-2.689.72-.221 1.426-.171 2.013.169.244-.463.67-.795 1.162-.795.705 0 1.22.621 1.22 1.364 0 .29-.06.579-.165.842-.384.96-.963 1.71-1.384 2.167-.166.18-.196.444-.075.653.131.228.395.354.63.354.282 0 .583-.17.834-.471.49-.59.808-1.49.808-2.404 0-1.843-1.187-3.213-2.98-3.213-2.297 0-4.396 2.166-4.876 5.013-.3 1.776.162 3.459 1.393 4.518.863.741 1.95 1.1 3.092 1.1 1.523 0 3.106-.69 4.148-1.852a.453.453 0 0 1 .634-.048.442.442 0 0 1 .047.63z',
  },
  Salesforce: {
    hex: '00A1E0',
    path: 'M10.006 5.16a4.579 4.579 0 0 1 3.7-1.89c1.72 0 3.21.95 3.99 2.36a5.348 5.348 0 0 1 2.074-.42c2.96 0 5.36 2.42 5.36 5.4s-2.4 5.4-5.36 5.4a5.28 5.28 0 0 1-1.18-.13 4.15 4.15 0 0 1-3.68 2.23 4.11 4.11 0 0 1-2.07-.55A4.82 4.82 0 0 1 8.34 20c-.47 0-.93-.07-1.37-.2A3.6 3.6 0 0 1 3.59 22c-1.99 0-3.59-1.62-3.59-3.63 0-1.14.52-2.16 1.34-2.83a4.63 4.63 0 0 1-.38-1.86c0-2.56 2.07-4.64 4.62-4.64.72 0 1.4.16 2.01.46a4.58 4.58 0 0 1 2.39-4.3z',
  },
  AWS: {
    hex: 'FF9900',
    path: 'M6.763 10.036c0 .296.032.535.088.71.064.176.144.368.256.576.04.063.056.127.056.183 0 .08-.048.16-.152.24l-.503.335a.383.383 0 0 1-.208.072c-.08 0-.16-.04-.239-.112a2.47 2.47 0 0 1-.287-.374 6.18 6.18 0 0 1-.248-.467c-.622.734-1.405 1.101-2.347 1.101-.67 0-1.205-.191-1.596-.574-.391-.384-.59-.894-.59-1.533 0-.678.239-1.23.726-1.644.487-.415 1.133-.623 1.955-.623.272 0 .551.024.846.064.296.04.6.104.918.176v-.583c0-.607-.127-1.03-.375-1.277-.255-.248-.686-.367-1.3-.367-.28 0-.568.031-.863.103a6.395 6.395 0 0 0-.862.287l-.128.024c-.112 0-.168-.08-.168-.247v-.391c0-.128.016-.224.056-.288a.597.597 0 0 1 .216-.135 4.44 4.44 0 0 1 1.006-.36 4.894 4.894 0 0 1 1.246-.16c.95 0 1.644.216 2.091.647.439.43.662 1.085.662 1.963v2.586zm-3.24 1.214c.263 0 .534-.048.822-.144.287-.096.543-.271.758-.51.128-.152.224-.32.272-.512.047-.191.08-.423.08-.694v-.335a6.66 6.66 0 0 0-.735-.136 6.02 6.02 0 0 0-.75-.048c-.535 0-.926.104-1.19.32-.263.215-.39.518-.39.917 0 .375.095.655.295.846.191.2.47.296.838.296zm6.41.862c-.144 0-.24-.024-.304-.08-.064-.048-.12-.16-.168-.311L7.586 5.55a1.398 1.398 0 0 1-.072-.32c0-.128.064-.2.191-.2h.783c.151 0 .255.025.31.08.065.048.113.16.16.312l1.342 5.284 1.245-5.284c.04-.16.088-.264.151-.312a.549.549 0 0 1 .32-.08h.638c.152 0 .256.025.32.08.063.048.12.16.151.312l1.261 5.348 1.381-5.348c.048-.16.104-.264.16-.312a.52.52 0 0 1 .311-.08h.743c.127 0 .2.065.2.2 0 .04-.009.08-.017.128a1.137 1.137 0 0 1-.056.2l-1.923 6.17c-.048.16-.104.264-.168.312a.549.549 0 0 1-.303.08h-.687c-.151 0-.255-.024-.32-.08-.063-.056-.119-.16-.15-.32l-1.238-5.148-1.23 5.14c-.04.16-.087.264-.15.32-.065.056-.177.08-.32.08zm10.256.215c-.415 0-.83-.048-1.229-.143-.399-.096-.71-.2-.918-.32-.128-.071-.215-.151-.247-.223a.563.563 0 0 1-.048-.224v-.407c0-.167.064-.247.183-.247.048 0 .096.008.144.024.048.016.12.048.2.08.271.12.566.215.878.279.319.064.63.096.95.096.502 0 .894-.088 1.165-.264a.86.86 0 0 0 .415-.758.777.777 0 0 0-.215-.559c-.144-.151-.415-.287-.806-.415l-1.157-.36c-.583-.183-1.014-.454-1.277-.813a1.902 1.902 0 0 1-.4-1.158c0-.335.073-.63.216-.886.144-.255.335-.479.575-.654.24-.184.51-.32.83-.415.32-.096.655-.136 1.006-.136.176 0 .359.008.535.032.183.024.35.056.518.088.16.04.312.08.455.127.144.048.256.096.336.144a.69.69 0 0 1 .24.2.43.43 0 0 1 .071.263v.375c0 .168-.064.256-.184.256a.83.83 0 0 1-.303-.096 3.652 3.652 0 0 0-1.532-.311c-.455 0-.815.071-1.062.223-.248.152-.375.383-.375.71 0 .224.08.416.24.567.159.152.454.304.878.44l1.134.358c.574.184.99.44 1.237.767.247.327.367.702.367 1.117 0 .343-.072.655-.207.926-.144.272-.336.511-.583.703-.248.2-.543.343-.886.447-.36.111-.734.167-1.142.167zM21.698 16.207c-2.626 1.94-6.442 2.969-9.722 2.969-4.598 0-8.74-1.7-11.87-4.526-.247-.223-.024-.527.27-.351 3.384 1.963 7.559 3.153 11.877 3.153 2.914 0 6.114-.607 9.06-1.852.439-.2.814.287.385.607zM22.792 14.961c-.336-.43-2.22-.207-3.074-.103-.255.032-.295-.192-.063-.36 1.5-1.053 3.967-.75 4.254-.399.287.36-.08 2.826-1.485 4.007-.215.184-.423.088-.327-.151.32-.79 1.03-2.57.695-2.994z',
  },
  Monday: {
    hex: 'FF3D57',
    path: 'M4.8 19.2a2.4 2.4 0 1 1 0-4.8 2.4 2.4 0 0 1 0 4.8zM2.4 12a2.4 2.4 0 0 1-2.103-3.554l3.6-6.6a2.4 2.4 0 0 1 4.206 2.308l-3.6 6.6A2.4 2.4 0 0 1 2.4 12zm7.2 0a2.4 2.4 0 0 1-2.103-3.554l3.6-6.6a2.4 2.4 0 0 1 4.206 2.308l-3.6 6.6A2.4 2.4 0 0 1 9.6 12zm9.6 7.2a2.4 2.4 0 1 1 0-4.8 2.4 2.4 0 0 1 0 4.8zm-2.4-7.2a2.4 2.4 0 0 1-2.103-3.554l3.6-6.6a2.4 2.4 0 1 1 4.206 2.308l-3.6 6.6A2.4 2.4 0 0 1 16.8 12z',
  },
};

function getIconData(name: string): {path: string; hex: string} | null {
  return siCache[name] || MANUAL_ICONS[name] || null;
}

interface BrandIconProps {
  name: string;
  size: number;
}

export const BrandIcon: React.FC<BrandIconProps> = ({name, size}) => {
  const data = getIconData(name);
  const borderRadius = size * 0.22;

  if (data) {
    return (
      <div
        style={{
          width: size,
          height: size,
          borderRadius,
          backgroundColor: 'white',
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'center',
          boxShadow: '0 2px 16px rgba(0,0,0,0.10), 0 0 0 1px rgba(0,0,0,0.04)',
          overflow: 'hidden',
        }}
      >
        <svg
          width={size * 0.58}
          height={size * 0.58}
          viewBox="0 0 24 24"
          fill={`#${data.hex}`}
        >
          <path d={data.path} />
        </svg>
      </div>
    );
  }

  // Fallback: styled letter icon
  const FALLBACK_COLORS: Record<string, {bg: string; fg: string}> = {
    Slack: {bg: '#4A154B', fg: '#fff'},
    Gmail: {bg: '#EA4335', fg: '#fff'},
    GitHub: {bg: '#24292e', fg: '#fff'},
    Figma: {bg: '#F24E1E', fg: '#fff'},
    Linear: {bg: '#5E6AD2', fg: '#fff'},
    Sentry: {bg: '#362D59', fg: '#fff'},
    Jira: {bg: '#0052CC', fg: '#fff'},
    Discord: {bg: '#5865F2', fg: '#fff'},
    Vercel: {bg: '#000', fg: '#fff'},
    Notion: {bg: '#000', fg: '#fff'},
  };
  const fb = FALLBACK_COLORS[name] || {bg: '#f0f0f0', fg: '#333'};

  return (
    <div
      style={{
        width: size,
        height: size,
        borderRadius,
        backgroundColor: fb.bg,
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        boxShadow: '0 2px 16px rgba(0,0,0,0.10), 0 0 0 1px rgba(0,0,0,0.04)',
      }}
    >
      <span style={{fontSize: size * 0.4, fontWeight: 700, color: fb.fg, fontFamily: 'system-ui'}}>
        {name[0]}
      </span>
    </div>
  );
};
